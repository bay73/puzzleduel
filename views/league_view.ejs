<%- include ('./partials/navbar') %>
<div class="container">
  <div class="row">
    <div class="col-12 m-auto">
      <%- include ('./partials/messages') %>
      <div class="card">
        <div class="d-flex flex-row flex-wrap justify-content-between card-header">
          <h1 class=""><%= name %>
          </h1>
        </div>
        <div class="card-body">
          <table class="table table-hover table-condensed table-striped">
            <tbody>
              <tr>
              </tr>
              <% let setting = leagueSettings[code] %>
              <% let index = 0  %>
              <% results.sort((r1,r2) => {  %>
              <%   return (r1.solvedCount == r2.solvedCount)?(r1.totalTime - r2.totalTime):(r2.solvedCount - r1.solvedCount);  %>
              <% }).forEach(function(result) { %>
              <% let style = setting.mainStyle %>
              <% if (index < setting.top ) style = setting.topStyle %>
              <% if (index >= setting.bottom ) style = setting.bottomStyle %>
              <tr style='<%= style %>' >
                <td><%= result.userName %></td>
                <td>
                  <%= result.solvedCount %>
                </td>
                <td>
                  <%= result.showTime %>
                </td>
              </tr>
              <% index++ %>
              <% }) %>
            </tbody>
          </table>
          <%= __('League ranking based on the number of daily puzzles of the month solved during the month without error submissions. The totol solving time is considered as an additional ranking parameter.') %>
          <br>
          <% let prev = leagueSettings[setting.prev] %>
          <% if (prev) {%>
          <%= setting.top %><%= __(' top solvers after end of the month will be promoted to ') %><a href='/league/<%= setting.prev %>/<%= date %>'><%= prev.name %></a>
          <br>
          <% } %>
          <% let next = leagueSettings[setting.next] %>
          <% if (next) {%>
          <%= results.length - setting.bottom %><%= __(' bottom solvers after end of the month will be downgraded to ') %><a href='/league/<%= setting.next %>/<%= date %>'><%= next.name %></a>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>
<%- include ('./partials/footer') %>

