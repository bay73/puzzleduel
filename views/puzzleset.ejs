<%- include ('./partials/navbar') %>
<style>
  .stars {
     display: inline-block;
     background-color: goldenRod;
     top: 0;
     left: 0;
     height: 15px;
     mask-image: url(/images/star.png);
     mask-repeat: repeat-x;
     mask-size: 15px 15px;
     -webkit-mask-image: url(/images/star.png);
     -webkit-mask-repeat: repeat-x;
     -webkit-mask-size: 15px 15px;
   }
</style>
<script>
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip({placement: "auto"});
  });
</script>
<div class="container">
  <div class="row">
    <div class="col-12 m-auto">
      <%- include ('./partials/messages') %>
      <div class="card">
        <h1 class="card-header"><%= set.name %></h1>
        <div class="card-body">
          <%- set.description %>
        </div>
        <div class="card-body">
          <table class="table table-hover table-condensed">
            <tbody>
              <tr>
                <th><%= __('#') %></th><th><%= __('Puzzle') %></th>
              </tr>
              <% puzzles.sort((puzzle1, puzzle2) => puzzle1.num - puzzle2.num).forEach(function(puzzle) { %>
              <tr>
                <td>
                  <%= puzzle.num %>
                </td>
                <td>
                  <% var stars=puzzle.difficulty>0?(1+Math.round(10*Math.log(puzzle.difficulty/30000))/10):0; %>
                  <a href="/single/<%= puzzle.code %>">
                    <%= puzzle.type %>
                    <%= puzzle.dimension?" ("+puzzle.dimension+")":"" %>
                    <span class="stars" style="width: calc(15px * <%= stars %>)" data-toggle="tooltip" title="<%= stars %>">
                    </span>
                  </a>
                </td>
              </tr>
              <% }) %>
              <tr>
                <td>
                </td>
                <td>
                </td>
                <td>
                  <a href="#">
                    <span class="glyphicon glyphicon-plus"></span>
                  </a>
                </td>
              </tr>
              <% if (set.authorId.equals(user)) { %>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<%- include ('./partials/footer') %>

